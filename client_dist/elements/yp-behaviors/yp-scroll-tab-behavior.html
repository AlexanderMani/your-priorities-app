<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>
  /**
   * @polymerBehavior YpScrollTabBehavior
   */
  Polymer.YpScrollTabBehavior = {

    properties: {
      moreToLoad: {
        type: Boolean,
        value: false
      }
    },

    attached: function () {
      window.addEventListener('scroll', function(e) {
        this._isLoadMoreElementInView();
      }.bind(this));
    },

    detached: function () {
      this.unlisten(window, 'scroll');
    },

    _isLoadMoreElementInView: function () {
      var loadMoreButton = this.$$("#loadMoreButton");
      if (this._isVisible() && loadMoreButton && withinviewport(loadMoreButton)) {
        debugger;
        this._loadMoreData();
      }
    },

    _isVisible: function () {
      return Boolean(this.offsetWidth || this.offsetHeight);
    },

    setMoreToLoad: function () {
      this.async(function () {
        this.set('moreToLoad', true);
        this.async(function () {
          this._isLoadMoreElementInView();
        }, 400);
      }, 250);
    }
  }
</script>
