<html><head><meta charset="UTF-8"><link rel="import" href="../yp-app.html"></head><body><div hidden="" by-vulcanize=""><dom-module id="yp-image-uploader" assetpath="../yp-image-uploader/">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }

      .icon {
        padding-right: 2px;
      }

      .upload-button {
        @apply(--layout-horizontal);
        @apply(--layout-flex);
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <div class="upload-button">
      <input type="file" style="display: none" id="fileUploader" name="filename">
      <paper-button raised="" on-tap="_openUploadFile">
        <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
        <span>[[t('image.upload')]]</span>
      </paper-button>
    </div>

  </template>

  <script>Polymer({is:"yp-image-uploader",behaviors:[Polymer.appHelpers],properties:{post:{type:Object,observer:"_postChanged"}},_openUploadFile:function(){this.$.fileUploader.click()},_postChanged:function(e,s){e||this.set("location",null)},_response:function(e,s,t){this.endorsements=s.response,this.endorsements.length>this.userImagesLimit&&(this.$$("#moreImages").style.display="inline")},_moreUserImages:function(){this.$$("#moreImagesButton").style.display="none",this.$$("#numberOfMoreUserImages").style.display="none",this.$.restOfUserImages.style.display="inline"}});</script>
</dom-module>
<dom-module id="yp-post-location" assetpath="../yp-post/">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
        width: 100%;
        height: 100%;
      }

      .location-button {
        @apply(--layout-horizontal);
        @apply(--layout-flex);
      }

      #map {
        width: 100%;
        height: 100%;
      }

      @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
        #map {
          min-height: 220px;
        }
      }

      .mapSearchInput {
        width: 100%;
        margin-top: 8px;
      }

      paper-input {
        width: 250px;
      }

      .searchResultText {
        width: 100%;
        text-align: right;
        padding-top: 8px;
      }

      paper-button {
        font-size: 16px;
        padding-top: 32px;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <iron-media-query query="(max-width: 1024px)" query-matches="{{narrowPad}}"></iron-media-query>

    <google-map-search id="mapSearch" map="[[map]]" on-google-map-search-results="_mapSearchResults"></google-map-search>

    <google-map id="map" zoom="[[mapZoom]]" api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0" map="{{map}}" libraries="places" on-map-type-changed="_mapTypeChanged" class="map" click-events="" on-zoom-changed="_zoomChanged" on-google-map-click="_setLocation" fit-to-markers="">
      <google-map-marker latitude="64.13897027178841" longitude="-21.876912117004395" id="marker"></google-map-marker>
    </google-map>

    <div class="mapSearchInput layout vertical center-center">
      <div class="layout horizontal start">
        <paper-input max-length="60" label="[[t('maps.searchInput')]]" value="{{mapSearchString}}" on-keydown="_submitOnEnter"></paper-input>
        <paper-button on-tap="_searchMap">[[t('maps.search')]]</paper-button>
      </div>
      <div class="searchResultText layout horizontal center-center">
        [[mapSearchResultAddress]]
      </div>
      <paper-spinner id="spinner"></paper-spinner>
    </div>
  </template>

  <script>Polymer({is:"yp-post-location",behaviors:[Polymer.appHelpers],properties:{map:{type:Object},mapSearchString:{type:String,value:""},mapSearchResultAddress:{type:String,value:""},location:{type:Object,observer:"_locationChanged",notify:!0},mapZoom:{type:Number,value:13,computed:"_computeMapZoom(location)"},encodedLocation:{type:String,notify:!0},post:{type:Object,observer:"_postChanged"},marker:{type:Object},active:{type:Boolean,value:!1},narrowPad:Boolean},_computeMapZoom:function(t){return t&&t.map_zoom?t.map_zoom:this.mapZoom},_submitOnEnter:function(t){13===t.keyCode&&this._searchMap()},_searchMap:function(){this.$.mapSearch.query=this.mapSearchString,this.$.mapSearch.search(),this.$.spinner.active=!0,this.set("mapSearchResultAddress","")},_mapSearchResults:function(t,o){this.$.spinner.active=!1,o&&o.length>0&&(this.set("location",{latitude:o[0].latitude,longitude:o[0].longitude,map_zoom:15}),this.mapSearchResultAddress=o[0].formatted_address,this.$.map.zoom=15,this.$.map.resize())},ready:function(){this.location||this.async(function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){this.location||(this.location={latitude:t.coords.latitude,longitude:t.coords.longitude,map_zoom:13})}.bind(this))},50)},_zoomChanged:function(t,o){o&&o.value&&this.set("location.map_zoom",o.value),this.set("encodedLocation",JSON.stringify(this.location))},_mapTypeChanged:function(t,o){o&&o.value&&this.set("location.mapType",o.value),this.set("encodedLocation",JSON.stringify(this.location))},_locationChanged:function(t,o){t&&(this.$.marker.setAttribute("latitude",t.latitude),this.$.marker.setAttribute("longitude",t.longitude),t.map_zoom&&(this.$.map.zoom=t.map_zoom),t.mapType&&(this.$.map.mapType=t.mapType),this.$.map.resize(),this.set("encodedLocation",JSON.stringify(t)))},_setLocation:function(t,o){this.set("location",{latitude:o.latLng.lat(),longitude:o.latLng.lng(),mapType:this.$.map.mapType,map_zoom:this.$.map.zoom})},_postChanged:function(t,o){t||this.set("location",null)}});</script>
</dom-module>
<dom-module id="yp-post-edit" assetpath="../yp-post/">
  <template>

    <style include="iron-flex iron-flex-alignment">
      .access {
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }

      file-upload::shadow paper-button {
        background-color: var(--accent-color);
        color: #FFF;
      }

      file-upload {
        margin-top: 16px;
      }

      .accessHeader {
        color: var(--primary-color,#777);
        font-weight: normal;
        margin-bottom: 0;
      }

      paper-radio-button {
        display: block;
      }

      .container {
        width: 100%;
        height: 100%;
        min-height: 300px;
      }

      @media (max-width: 600px) {
        .container {
          padding-right: 16px;
        }

        .subContainer {
        }

        paper-tab {
          font-size: 12px;
        }
      }

      yp-post-location {
      }

      section {
        margin-top: 32px;
      }

      .imageSizeInfo {
        font-size: 12px;
        padding-bottom: 16px;
        color: #444;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-edit-dialog double-width="" id="editDialog" icon="icons:lightbulb-outline" action="[[action]]" use-next-tab-action="[[new]]" on-next-tab-action="_nextTab" method="[[method]]" save-text="[[saveText]]" next-action-text="[[t('next')]]" toast-text="[[toastText]]" params="[[params]]">
      <h2>[[editHeaderText]]</h2>
      <paper-tabs selected="{{selected}}" id="paperTabs" focused="">
        <paper-tab><span>[[t('post.yourPost')]]</span></paper-tab>
        <template is="dom-if" restamp="" if="[[new]]">
          <paper-tab>[[t('post.yourPoint')]]</paper-tab>
        </template>
        <template is="dom-if" if="[[!locationHidden]]" restamp="">
          <paper-tab>[[t('post.location')]]</paper-tab>
        </template>
        <paper-tab>[[t('post.photo')]]</paper-tab>
      </paper-tabs>

      <div class="layout vertical wrap container">
        <neon-animated-pages id="pages" class="layout horizontal flex" selected="[[selected]]">
          <section>
            <div class="layout vertical">

              <paper-input id="name" required="" minlength="5" name="name" type="text" label="[[t('title')]]" value="{{post.name}}" maxlength="60" char-counter="">
              </paper-input>

              <template is="dom-if" if="[[_showCategories(group)]]" restamp="">
                <paper-dropdown-menu label="[[t('category.select')]]">
                  <paper-menu class="dropdown-content" selected="{{selectedCategoryArrayId}}">
                    <template is="dom-repeat" items="[[group.Categories]]" as="category">
                      <paper-item data-category-id$="[[category.id]]">[[category.name]]</paper-item>
                    </template>
                  </paper-menu>
                </paper-dropdown-menu>
                <input type="hidden" name="categoryId" value="[[selectedCategoryId]]">
              </template>

              <paper-textarea id="description" required="" minlength="10" name="description" value="{{post.description}}" label="[[t('post.description')]]" char-counter="" rows="2" max-rows="5" maxlength="500">
              </paper-textarea>
            </div>
          </section>

          <template is="dom-if" restamp="" if="[[new]]">
            <section class="subContainer">
              <paper-textarea id="pointFor" required="" minlength="5" name="pointFor" value="{{post.pointFor}}" label="[[t('point.for')]]" char-counter="" rows="2" max-rows="5" maxlength="500">
              </paper-textarea>
            </section>
          </template>

          <template is="dom-if" if="[[!locationHidden]]" restamp="">
            <section>
                <template is="dom-if" if="[[mapActive]]" restamp="">
                  <yp-post-location encoded-location="{{encodedLocation}}" location="{{location}}" post="[[post]]"></yp-post-location>
                </template>
            </section>
          </template>

          <section>
            <div class="layout vertical center-center">
              <file-upload id="imageFileUpload" raised="true" multi="false" target="/api/images?itemType=post-header" method="POST" on-success="_imageUploaded">
                <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
                <span>[[t('image.upload')]]</span>
              </file-upload>
              <div class="imageSizeInfo layout horizontal">
                <div>864 x 486 (16/9 widescreen)</div>
              </div>
              <div>[[t('post.cover.imageInfo')]]</div>
              <br>
              <h3 class="accessHeader">[[t('post.cover.media')]]</h3>
              <paper-radio-group id="coverMediaType" name="coverMediaType" class="coverMediaType layout horizontal" selected="{{selectedCoverMediaType}}">
                <paper-radio-button name="none">[[t('post.cover.none')]]</paper-radio-button>
                <paper-radio-button name="image">[[t('post.cover.image')]]</paper-radio-button>
                <template is="dom-if" if="[[location]]">
                  <paper-radio-button name="map">[[t('post.cover.map')]]</paper-radio-button>
                  <paper-radio-button name="streetView">[[t('post.cover.streetview')]]</paper-radio-button>
                </template>
              </paper-radio-group>
            </div>
          </section>
        </neon-animated-pages>
        <input type="hidden" name="location" value="[[encodedLocation]]">
        <input type="hidden" name="coverMediaType" value="[[selectedCoverMediaType]]">
        <input type="hidden" name="uploadedHeaderImageId" value="[[uploadedHeaderImageId]]">
      </div>
    </yp-edit-dialog>
  </template>

</dom-module>

<script>Polymer({is:"yp-post-edit",behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior],properties:{action:{type:String,value:"/api/posts"},new:{type:Boolean,value:!1},post:{type:Object,observer:"_postChanged"},group:{type:Object},locationHidden:{type:Boolean,value:!1,observer:"_locationHiddenChanged"},location:{type:Object,observer:"_locationChanged"},encodedLocation:{type:String,observer:"_encodedLocationChanged"},selectedCategoryArrayId:{type:Number,observer:"_selectedCategoryChanged"},selectedCategoryId:{type:Number},selectedCoverMediaType:{type:String,value:"none",observer:"_coverMediaTypeValueChanged"},uploadedHeaderImageId:{type:String,observer:"_uploadedHeaderImageIdChanged"},selected:{type:Number,value:0,observer:"_selectedChanged"},mapActive:{type:Boolean,value:!1}},listeners:{"iron-form-invalid":"_formInvalid"},_locationHiddenChanged:function(e){this.async(function(){var e=this.$$("#pages");e&&e.forceSynchronousItemUpdate();var t=this.$$("#paperTabs");t&&t.forceSynchronousItemUpdate(),console.log("Location hidden changed")},10)},_formInvalid:function(){this.set("selected",0),this.$$("#name").autoValidate=!0,this.$$("#description").autoValidate=!0,this.new&&(this.$$("#pointFor").autoValidate=!0)},_encodedLocationChanged:function(e){},_locationChanged:function(e){!e||this.selectedCoverMediaType&&""!=this.selectedCoverMediaType&&"none"!=this.selectedCoverMediaType||this.set("selectedCoverMediaType","map")},_uploadedHeaderImageIdChanged:function(e){e&&this.set("selectedCoverMediaType","image")},_nextOnEnter:function(e){13===e.keyCode&&this._searchMap()},_nextTab:function(){var e=3;this.new||(e=2),this.locationHidden&&(e-=1),this.selected<e&&this.set("selected",this.selected+1)},_selectedChanged:function(e){this.locationHidden||e!=(this.new?2:1)?this.set("mapActive",!1):this.set("mapActive",!0);var t=this.locationHidden?2:3;!this.new||this.new&&e==t?this.$$("#editDialog").useNextTabAction=!1:this.$$("#editDialog").useNextTabAction=!0},_selectedCategoryChanged:function(e,t){null!=e&&void 0!=e&&(this.selectedCategoryId=this.group.Categories[e].id)},_showCategories:function(e){return!(!e||!e.Categories)&&e.Categories.length>0},getPositionInArrayFromId:function(e,t){for(var o=0;o<e.length;o++)if(e[o].id==t)return o;return null},_postChanged:function(e,t){e&&(e.location&&(this.set("location",e.location),this.set("encodedLocation",JSON.stringify(this.location))),e.cover_media_type&&(this.selectedCoverMediaType=e.cover_media_type),e.category_id&&(this.selectedCategoryId=e.category_id,this.selectedCategoryArrayId=this.getPositionInArrayFromId(this.group.Categories,e.category_id)))},_imageUploaded:function(e,t){var o=JSON.parse(t.xhr.response);this.set("uploadedHeaderImageId",o.id)},_coverMediaTypeValueChanged:function(e,t){},_coverMediaTypeChanged:function(e,t){},_customRedirect:function(e){e?(e.newEndorsement&&window.appUser&&window.appUser.endorsementPostsIndex&&(window.appUser.endorsementPostsIndex[e.id]=e.newEndorsement),this.redirectTo("/post/"+e.id)):console.warn("No post found on custom redirect")},_clear:function(){this.new&&(this.set("post",{name:"",description:"",pointFor:"",categoryId:null}),this.set("location",null),this.set("selectedCategoryArrayId",null),this.set("selectedCategoryId",null),this.set("selected",0),this.set("uploadedHeaderImageId",null),this.$$("#imageFileUpload").clear(),this.set("selectedCoverMediaType","none"))},setup:function(e,t,o,i){t?(this.set("group",t),this.group.configuration&&this.group.configuration.locationHidden&&1==this.group.configuration.locationHidden?this.set("locationHidden",!0):this.set("locationHidden",!1)):this.set("group",null),e?this.set("post",e):this.set("post",null),this.set("new",o),this.set("refreshFunction",i),this._setupTranslation(),this._clear()},_setupTranslation:function(){this.new?(this.editHeaderText=this.t("post.new"),this.toastText=this.t("post.toast.created")):(this.editHeaderText=this.t("post.edit"),this.toastText=this.t("post.toast.updated"))}});</script>
<dom-module id="yp-delete-dialog" assetpath="../yp-delete-dialog/">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
        height: 0;
      }

      paper-dialog {
        background-color: #FFF;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-ajax method="DELETE" id="deleteAjax" on-response="_deleteResponse"></yp-ajax>
    <paper-dialog id="deleteConfirmationDialog">
      <div>[[confirmationText]]</div>
      <div class="buttons">
        <paper-button dialog-dismiss="">[[t('cancel')]]</paper-button>
        <paper-button dialog-confirm="" on-tap="_delete">[[t('delete')]]</paper-button>
      </div>
    </paper-dialog>
  </template>

  <script>Polymer({is:"yp-delete-dialog",behaviors:[Polymer.appHelpers],properties:{confirmationText:{type:String},action:{type:String},actionId:{type:String},onDeletedFunction:{type:Function,value:null}},setup:function(e,t,i,n){this.set("action",e),this.set("actionId",t),this.set("confirmationText",i),this.set("onDeletedFunction",n)},open:function(){this.$$("#deleteConfirmationDialog").open()},_delete:function(){this.$$("#deleteAjax").url=this.action+this.actionId,this.$$("#deleteAjax").setBody({deleteConfirmed:!0}),this.$$("#deleteAjax").generateRequest()},_deleteResponse:function(){this.fire("deleted"),this.onDeletedFunction&&this.onDeletedFunction()}});</script>
</dom-module>
<script>Polymer.ypCollectionStatusOptions={properties:{collectionStatusOptions:{type:Object,computed:"_collectionStatusOptions(language)"}},_collectionStatusOptions:function(t){return t?[{name:"active",translatedName:this.t("status.active")},{name:"featured",translatedName:this.t("status.featured")},{name:"archived",translatedName:this.t("status.archived")}]:[]}};</script>
<dom-module id="yp-community-edit" assetpath="../yp-community/">
  <template>

    <style include="iron-flex iron-flex-alignment">
      .access {
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }

      .accessHeader {
        color: var(--primary-color,#777);
        font-weight: normal;
        margin-bottom: 0px;
      }

      paper-radio-button {
        display: block;
      }

      .additionalSettings {
        padding-top: 16px;
      }

      .half {
        width: 50%;
      }

      .hostnameInfo {
        color: #888;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-edit-dialog id="editDialog" icon="group-work" action="[[action]]" method="[[method]]" params="[[params]]" save-text="[[saveText]]" toast-text="[[toastText]]">
      <h2>[[editHeaderText]]</h2>

      <div class="layout vertical">
        <paper-input id="name" name="name" type="text" label="[[t('name')]]" value="{{community.name}}" maxlength="60" minlength="1" required="" char-counter="" class="mainInput">
        </paper-input>

        <paper-input id="hostname" name="hostname" type="text" allowed-pattern="[a-zA-Z0-9-]" label="[[t('community.hostname')]]" value="{{community.hostname}}" maxlength="80" minlength="1" required="" char-counter="" class="mainInput">
        </paper-input>
        <div class="hostnameInfo">
          https://[[hostnameExample]]
        </div>

        <paper-textarea id="description" name="description" value="{{community.description}}" label="[[t('description')]]" char-counter="" rows="2" max-rows="5" minlength="1" required="" maxlength="300" class="mainInput">
        </paper-textarea>
      </div>

      <div class="layout horizontal">
        <div class="layout vertical additionalSettings half">
          <file-upload id="logoImageUpload" raised="true" multi="false" target="/api/images?itemType=community-logo" method="POST" on-success="_logoImageUploaded">
            <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
            <span>[[t('image.logo.upload')]]</span>
          </file-upload>
        </div>

        <div class="layout vertical additionalSettings half">
          <file-upload id="headerImageUpload" raised="true" multi="false" target="/api/images?itemType=community-header" method="POST" on-success="_headerImageUploaded">
            <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
            <span>[[t('image.header.upload')]]</span>
          </file-upload>
        </div>
      </div>

      <yp-theme-selector object="[[community]]" selected-theme="{{themeId}}"></yp-theme-selector>

      <paper-checkbox name="onlyAdminsCanCreateGroups" checked$="{{community.only_admins_can_create_groups}}">[[t('community.onlyAdminsCanCreateGroups')]]</paper-checkbox>

      <input type="hidden" name="themeId" value="[[themeId]]">

      <input type="hidden" name="uploadedLogoImageId" value="[[uploadedLogoImageId]]">
      <input type="hidden" name="uploadedHeaderImageId" value="[[uploadedHeaderImageId]]">

      <div class="layout horizontal center-center">
        <paper-dropdown-menu label="[[t('status.select')]]">
          <paper-menu class="dropdown-content" attr-for-selected="name" selected="{{status}}">
            <template is="dom-repeat" items="[[collectionStatusOptions]]" as="statusOption">
              <paper-item name="[[statusOption.name]]">[[statusOption.translatedName]]</paper-item>
            </template>
          </paper-menu>
        </paper-dropdown-menu>
        <input type="hidden" name="status" value="[[status]]">
      </div>

      <h3 class="accessHeader">[[t('Access')]]</h3>
      <paper-radio-group id="access" name="access" class="access" selected="{{communityAccess}}">
        <paper-radio-button name="public">[[t('public')]]</paper-radio-button>
        <paper-radio-button name="closed">[[t('closed')]]</paper-radio-button>
        <paper-radio-button name="secret">[[t('secret')]]</paper-radio-button>
      </paper-radio-group>

    </yp-edit-dialog>
  </template>

</dom-module>

<script>Polymer({is:"yp-community-edit",behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior,Polymer.ypCollectionStatusOptions],properties:{action:{type:String,value:"/api/communities"},community:{type:Object,observer:"_communityChanged"},hostnameExample:{type:String,computed:"_getExampleHostname(community.hostname)"},communityAccess:{type:String,value:"public"},params:{type:String},method:{type:String},uploadedLogoImageId:{type:String},uploadedHeaderImageId:{type:String},status:String,themeId:{type:String,value:null}},_getExampleHostname:function(t){return t?t+"."+window.appGlobals.domain.domain_name:"your-hostname."+window.appGlobals.domain.domain_name},_customRedirect:function(t){if(t&&t.hostnameTaken){var e=Polymer.dom(document).querySelector("yp-app").getDialog("errorDialog");e.showErrorDialog(this.t("hostnameTaken"))}else t?(window.appUser.recheckAdminRights(),this.redirectTo("/community/"+t.id)):console.warn("No community found on custom redirect")},_communityChanged:function(t,e){t&&(0===this.community.access?this.communityAccess="public":1===this.community.access?this.communityAccess="closed":2===this.community.access&&(this.communityAccess="secret"),this.community.status&&this.set("status",this.community.status))},_clear:function(){this.set("community",{name:"",description:"",access:0}),this.uploadedLogoImageId=null,this.uploadedHeaderImageId=null,this.$.headerImageUpload.clear(),this.$.logoImageUpload.clear()},setup:function(t,e,i){t?this.set("community",t):this.set("community",{name:"",description:"",access:0,status:"active"}),this.set("new",e),this.set("refreshFunction",i),this._setupTranslation()},_setupTranslation:function(){this.new?(this.set("editHeaderText",this.t("community.new")),this.set("toastText",this.t("community.toast.created")),this.set("saveText",this.t("create"))):(this.set("editHeaderText",this.t("Update community info")),this.set("toastText",this.t("community.toast.updated")),this.set("saveText",this.t("update")))}});</script>
<dom-module id="yp-group-edit" assetpath="../yp-group/">
  <template>

    <style include="iron-flex iron-flex-alignment">
      .access {
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }

      .accessHeader {
        color: var(--primary-color,#777);
        font-weight: normal;
        margin-bottom: 0;
      }

      paper-radio-button {
        display: block;
      }

      .additionalSettings {
        padding-top: 16px;
      }

      file-upload {
        padding-top: 8px;
      }

      .half {
        width: 50%;
      }

      .config {
        padding: 8px;
        vertical-align: top;
      }

      paper-checkbox {
        padding-top: 8px;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-edit-dialog id="editDialog" icon="social:people" action="[[action]]" method="[[method]]" params="[[params]]" save-text="[[saveText]]" toast-text="[[toastText]]">
      <h2>[[editHeaderText]]</h2>

      <paper-input id="name" name="name" type="text" label="[[t('name')]]" value="{{group.name}}" maxlength="50" char-counter="">
      </paper-input>

      <paper-textarea id="objectives" name="objectives" value="{{group.objectives}}" label="[[t('group.objectives')]]" char-counter="" rows="2" max-rows="5" maxlength="300">
      </paper-textarea>

      <div class="layout horizontal">
        <div class="layout vertical additionalSettings half">
          <file-upload id="logoImageUpload" raised="true" multi="false" target="/api/images?itemType=group-logo" method="POST" on-success="_logoImageUploaded">
            <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
            <span>[[t('image.logo.upload')]]</span>
          </file-upload>
        </div>

        <div class="layout vertical additionalSettings half">
          <file-upload id="headerImageUpload" raised="true" multi="false" target="/api/images?itemType=group-header" method="POST" on-success="_headerImageUploaded">
            <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
            <span>[[t('image.header.upload')]]</span>
          </file-upload>
        </div>

        <input type="hidden" name="uploadedLogoImageId" value="[[uploadedLogoImageId]]">
        <input type="hidden" name="uploadedHeaderImageId" value="[[uploadedHeaderImageId]]">
      </div>

      <div class="layout horizontal wrap config">
        <div class="layout vertica configl">
          <yp-theme-selector object="[[group]]" selected-theme="{{themeId}}"></yp-theme-selector>
          <div class="layout horizontal center-center">
            <paper-dropdown-menu label="[[t('status.select')]]">
              <paper-menu class="dropdown-content" attr-for-selected="name" selected="{{status}}">
                <template is="dom-repeat" items="[[collectionStatusOptions]]" as="statusOption">
                  <paper-item name="[[statusOption.name]]">[[statusOption.translatedName]]</paper-item>
                </template>
              </paper-menu>
            </paper-dropdown-menu>
            <input type="hidden" name="status" value="[[status]]">
          </div>
        </div>
        <div class="layout vertical config">
          <h2>[[t('group.config')]]</h2>
          <paper-checkbox name="canVote" checked$="{{canVote}}">[[t('group.canVote')]]</paper-checkbox>
          <paper-checkbox name="canAddNewPosts" checked$="{{canAddNewPosts}}">[[t('group.canAddNewPosts')]]</paper-checkbox>
          <paper-checkbox name="locationHidden" checked$="{{locationHidden}}">[[t('group.locationHidden')]]</paper-checkbox>
        </div>
      </div>

      <input type="hidden" name="canVote" value$="[[canVote]]">
      <input type="hidden" name="canAddNewPosts" value$="[[canAddNewPosts]]">
      <input type="hidden" name="locationHidden" value$="[[locationHidden]]">

      <input type="hidden" name="themeId" value="[[themeId]]">

      <h3 class="accessHeader">[[t('access')]]</h3>
      <paper-radio-group id="access" name="access" class="access" selected="{{groupAccess}}">
        <paper-radio-button name="public" hidden$="[[!publicCommunity]]">[[t('group.public')]]</paper-radio-button>
        <paper-radio-button name="open_to_community" hidden$="[[publicCommunity]]">[[t('group.openToCommunity')]]</paper-radio-button>
        <paper-radio-button name="closed">[[t('group.closed')]]</paper-radio-button>
        <paper-radio-button name="secret">[[t('group.secret')]]</paper-radio-button>
      </paper-radio-group>

    </yp-edit-dialog>
  </template>

</dom-module>

<script>Polymer({is:"yp-group-edit",behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior,Polymer.ypCollectionStatusOptions],properties:{canVote:{type:Boolean,value:!0},canAddNewPosts:{type:Boolean,value:!0},action:{type:String,value:"/api/groups"},group:{type:Object,observer:"_groupChanged"},community:{type:Object},groupAccess:{type:String,value:"public"},uploadedLogoImageId:{type:String},uploadedHeaderImageId:{type:String},status:String,publicCommunity:{type:Boolean,value:!1},themeId:{type:String,value:null},locationHidden:Boolean},_publicCommunity:function(t){if(t)return 0==t.Community.access},_customRedirect:function(t){t?(window.appUser.recheckAdminRights(),this.redirectTo("/group/"+t.id)):console.warn("No group found on custom redirect")},_groupChanged:function(t,o){this.group&&(0==this.group.access?this.groupAccess="public":1==this.group.access?this.groupAccess="closed":2==this.group.access?this.groupAccess="secret":3==this.group.access&&(this.groupAccess="open_to_community"),this.group&&this.group.status&&this.set("status",this.group.status),this.group.configuration&&void 0!=this.group.configuration.canVote&&(this.set("canVote",this.group.configuration.canVote),this.set("canAddNewPosts",this.group.configuration.canAddNewPosts)),this.group.configuration&&void 0!=this.group.configuration.locationHidden&&this.set("locationHidden",this.group.configuration.locationHidden),this.community?0==this.community.access?this.set("publicCommunity",!0):this.set("publicCommunity",!1):this.group.Community&&(0==this.group.Community.access?this.set("publicCommunity",!0):this.set("publicCommunity",!1)))},_clear:function(){this.group={name:"",objectives:"",access:0,status:"active"},this.uploadedLogoImageId=null,this.uploadedHeaderImageId=null,this.$.headerImageUpload.clear(),this.$.logoImageUpload.clear()},setup:function(t,o,s){if(t)this.set("group",t);else{var e=0;this.community?0!=this.community.access&&(this.set("groupAccess","open_to_community"),e=3):this.group.Community&&0!=this.group.Community.access&&(this.set("groupAccess","open_to_community"),e=3),this.set("group",{name:"",objectives:"",access:e,status:"active"})}this.set("new",o),this.set("refreshFunction",s),this._setupTranslation()},_setupTranslation:function(){this.new?(this.editHeaderText=this.t("group.new"),this.toastText=this.t("group.toast.created")):(this.editHeaderText=this.t("group.update"),this.toastText=this.t("group.toast.updated"))}});</script>
<dom-module id="yp-post-user-image-edit" assetpath="../yp-post/">
  <template>

    <style include="iron-flex iron-flex-alignment">
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-edit-dialog double-width="" id="editDialog" icon="image:photo-camera" action="[[action]]" method="[[method]]" save-text="[[saveText]]" next-action-text="[[t('next')]]" toast-text="[[toastText]]" params="[[params]]">
      <h2>[[editHeaderText]]</h2>

      <div class="layout vertical center-center">
        <file-upload id="imageFileUpload" raised="true" multi="false" method="POST" on-success="_imageUploaded">
          <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
          <span>[[t('image.upload')]]</span>
        </file-upload>
      </div>

      <paper-input id="photographerName" name="photographerName" type="text" label="[[t('post.photographerName')]]" value="{{image.photographer_name}}" maxlength="60" char-counter="">
      </paper-input>

      <paper-textarea id="description" required="" minlength="15" name="description" value="{{image.description}}" label="[[t('post.description')]]" char-counter="" rows="2" max-rows="5" maxlength="200">
      </paper-textarea>

      <input type="hidden" name="uploadedPostUserImageId" value="[[uploadedPostUserImageId]]">
      <input type="hidden" name="oldUploadedPostUserImageId" value="[[oldUploadedPostUserImageId]]">

    </yp-edit-dialog>
  </template>

  <script>!function(){Polymer({is:"yp-post-user-image-edit",behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior],properties:{new:{type:Boolean,value:!1},image:{type:Object,observer:"_imageChanged"},post:{type:Object,observer:"_postChange"},action:{type:String,value:"/api/images"},imageUploadTarget:{type:String,notify:!0},uploadedPostUserImageId:{type:String},oldUploadedPostUserImageId:{type:String},editHeaderText:{type:String},saveText:{type:String},method:{type:String}},_postChange:function(t){t&&(this.$.imageFileUpload.target="/api/images?itemType=post-user-image&postId="+t.id)},listeners:{"iron-form-invalid":"_formInvalid"},_imageChanged:function(t){t&&this.set("oldUploadedPostUserImageId",t.id)},_formInvalid:function(){this.set("selected",0),this.$$("#photographerName").autoValidate=!0,this.$$("#description").autoValidate=!0},_imageUploaded:function(t,e){var i=JSON.parse(e.xhr.response);this.set("uploadedPostUserImageId",i.id)},_clear:function(){this.set("uploadedPostUserImageId",null),this.$$("#imageFileUpload").clear()},setup:function(t,e,i,s){e?this.set("image",e):this.set("image",{description:"",photographerName:""}),t?this.set("post",t):this.set("post",null),this.set("new",i),this.set("refreshFunction",s),this._setupTranslation()},_setupTranslation:function(){this.new?(this.editHeaderText=this.t("post.newPhoto"),this.toastText=this.t("post.photo.toast.added")):(this.editHeaderText=this.t("post.photoUpdate"),this.toastText=this.t("post.photo.toast.updated"))}})}();</script>
</dom-module>
<dom-module id="ac-notification-selection" assetpath="../ac-notifications/">
  <template>
    <style include="iron-flex iron-flex-alignment">
      .half {
        width: 50%;
      }

      .notificationName {
        padding-top: 16px;
        font-size: 16px;
        font-weight: bold;
        margin-bottom: 8px;
        padding-bottom: 4px;
        color: #333;
        border-bottom: solid 1px #ddd;
      }

      .notificationSub {
        color: #888;
      }

      paper-radio-button {
        padding-top: 8px;
        padding-bottom: 8px;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <div class="layout vertical">
      <div class="notificationName">[[name]]</div>
      <div class="layout horizontal wrap">
        <div class="layout vertical half">
          <div class="notificationSub">[[t('notification.method')]]</div>
          <div class="layout horizontal">
            <paper-radio-group id="notificationMethodGroup" name="method" class="method" attr-for-selected="enum-value" selected="{{method}}">
              <template is="dom-repeat" items="[[availableMethods]]">
                <paper-radio-button enum-value$="[[item.enumValue]]">[[item.name]]</paper-radio-button>
              </template>
            </paper-radio-group>
          </div>
        </div>
        <div class="layout vertical half">
          <div class="notificationSub">[[t('notification.frequency')]]</div>
          <div class="layout horizontal">
            <paper-radio-group id="notificationFrequencyGroup" name="frequency" attr-for-selected="enum-value" class="frequency" selected="{{frequency}}">
              <template is="dom-repeat" items="[[_getAvailableFrequencies(method)]]">
                <paper-radio-button enum-value$="[[item.enumValue]]">[[item.name]]</paper-radio-button>
              </template>
            </paper-radio-group>
          </div>
        </div>
      </div>
    </div>
  </template>

  <script>Polymer({is:"ac-notification-selection",behaviors:[Polymer.appHelpers],properties:{name:String,setting:{type:Object,notify:!0,observer:"_settingChanged"},frequency:{type:Number,notify:!0,observer:"_frequencyChanged"},method:{type:Number,notify:!0,observer:"_methodChanged"},availableFrequencies:{type:Array,computed:"_getAvailableFrequencies(language, method)"},availableMethods:{type:Object,computed:"_availableMethods(language)"}},_availableMethods:function(e){return e?[{name:this.t("notification.muted"),enumValue:0},{name:this.t("notification.browser"),enumValue:1},{name:this.t("notification.email"),enumValue:2}]:[]},_methodChanged:function(e){e=parseInt(e),this.setting.method!=e&&this.set("setting.method",e)},_frequencyChanged:function(e){e=parseInt(e),this.setting.frequency!=e&&this.set("setting.frequency",e)},_settingChanged:function(e){e&&(this.set("method",e.method),this.set("frequency",e.frequency))},_getAvailableFrequencies:function(e,t){var n=[];return e&&t&&0!=t&&(1==t?(this.set("frequency",0),n=[{name:this.t("notification.asItHappens"),enumValue:0}]):2==t&&(n=[{name:this.t("notification.asItHappens"),enumValue:0},{name:this.t("notification.hourly"),enumValue:1},{name:this.t("notification.daily"),enumValue:2},{name:this.t("notification.weekly"),enumValue:3},{name:this.t("notification.monthly"),enumValue:5}])),n}});</script>
</dom-module>
<dom-module id="ac-notification-settings" assetpath="../ac-notifications/">
  <template>
    <style include="iron-flex iron-flex-alignment">
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <ac-notification-selection name="[[t('notification.myPosts')]]" setting="{{notificationsSettings.my_posts}}">
    </ac-notification-selection>

    <ac-notification-selection name="[[t('notification.myPostsEndorsements')]]" setting="{{notificationsSettings.my_posts_endorsements}}">
    </ac-notification-selection>


    <ac-notification-selection name="[[t('notification.myPoints')]]" setting="{{notificationsSettings.my_points}}">
    </ac-notification-selection>

    <ac-notification-selection name="[[t('notification.myPointEndorsements')]]" setting="{{notificationsSettings.my_points_endorsements}}">
    </ac-notification-selection>

    <ac-notification-selection name="[[t('notification.allCommunity')]]" setting="{{notificationsSettings.all_community}}">
    </ac-notification-selection>

    <ac-notification-selection name="[[t('notification.allGroup')]]" setting="{{notificationsSettings.all_group}}">
    </ac-notification-selection>
  </template>

  <script>Polymer({is:"ac-notification-settings",behaviors:[Polymer.appHelpers],properties:{notificationsSettings:{type:Object,notify:!0,observer:"_notificationsSettingsChanged"}},observers:["settingsStarChanged(notificationsSettings.*)"],_notificationsSettingsChanged:function(t){},settingsStarChanged:function(t){this.fire("yp-notifications-changed",this.notificationsSettings)}});</script>
</dom-module>
<dom-module id="yp-user-edit" assetpath="../yp-user/">
  <template>

    <style include="iron-flex iron-flex-alignment">
      .container {
        margin-top: 16px;
        height: 100%;
      }

      .additionalSettings {
        margin-top: 16px;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <yp-edit-dialog id="editDialog" double-width="" icon="face" action="[[action]]" method="[[method]]" params="[[params]]" save-text="[[saveText]]" toast-text="[[toastText]]">
      <div class="container">
        <h2>[[editHeaderText]]</h2>

        <paper-tabs selected="{{selected}}" id="paper_tabs" focused="">
          <paper-tab><span>[[t('user.info')]]</span></paper-tab>
          <paper-tab>[[t('user.notifications')]]</paper-tab>
        </paper-tabs>

        <div class="layout vertical wrap container">
          <neon-animated-pages id="pages" class="layout horizontal flex" selected="[[selected]]">
            <section>
              <paper-input id="name" name="name" type="text" label="[[t('Name')]]" value="{{user.name}}" maxlength="50" char-counter="">
              </paper-input>

              <paper-input id="email" name="email" type="text" label="[[t('Email')]]" value="{{user.email}}">
              </paper-input>

              <div class="layout vertical additionalSettings">
                <file-upload id="profileImageUpload" raised="true" multi="false" target="/api/images?itemType=user-profile" method="POST" on-success="_profileImageUploaded">
                  <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
                  <span>[[t('image.profile.upload')]]</span>
                </file-upload>
              </div>

              <div class="layout vertical additionalSettings" hidden="">
                <file-upload id="headerImageUpload" raised="true" multi="false" target="/api/images?itemType=user-header" method="POST" on-success="_headerImageUploaded">
                  <iron-icon class="icon" icon="image:photo-camera"></iron-icon>
                  <span>[[t('image.header.upload')]]</span>
                </file-upload>
              </div>

              <input type="hidden" name="uploadedProfileImageId" value="[[uploadedProfileImageId]]">
              <input type="hidden" name="uploadedHeaderImageId" value="[[uploadedHeaderImageId]]">
            </section>

            <section>
              <ac-notification-settings notifications-settings="{{notificationSettings}}"></ac-notification-settings>
              <input type="hidden" name="notifications_settings" value="[[encodedUserNotificationSettings]]">
            </section>
          </neon-animated-pages>
        </div>
      </div>
    </yp-edit-dialog>
  </template>

</dom-module>

<script>Polymer({is:"yp-user-edit",behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior],properties:{action:{type:String,value:"/api/users"},user:{type:Object,observer:"_userChanged"},params:{type:String},method:{type:String},selected:{type:Number,value:0},encodedUserNotificationSettings:{type:String,observer:"_encodedUserNotificationSettingsChanged"},uploadedProfileImageId:{type:String},uploadedHeaderImageId:{type:String},notificationSettings:{type:Object,notify:!0,observer:"_notificationSettingsChanged"}},listeners:{"yp-notifications-changed":"_setNotificationSettings"},_setNotificationSettings:function(t,e){this.set("notificationSettings",e),this.set("encodedUserNotificationSettings",this._encodeNotificationsSettings(this.notificationSettings))},_notificationSettingsChanged:function(t){this.set("encodedUserNotificationSettings",this._encodeNotificationsSettings(this.notificationSettings))},_encodedUserNotificationSettingsChanged:function(t){},_encodeNotificationsSettings:function(t){return JSON.stringify(t)},_userChanged:function(t){this.set("notificationSettings",t.notifications_settings)},_profileImageUploaded:function(t,e){var i=JSON.parse(e.xhr.response);this.set("uploadedProfileImageId",i.id)},_headerImageUploaded:function(t,e){var i=JSON.parse(e.xhr.response);this.set("uploadedHeaderImageId",i.id)},_customRedirect:function(t){window.appUser.checkLogin()},_clear:function(){this.set("user",{name:"",email:"",access:2}),this.uploadedProfileImageId=null,this.uploadedHeaderImageId=null,this.$.headerImageUpload.clear(),this.$.profileImageUpload.clear()},setup:function(t,e,i){this.set("user",t),this.set("new",e),this.set("refreshFunction",i),this._setupTranslation()},_setupTranslation:function(){this.new?(this.editHeaderText=this.t("user.new"),this.toastText=this.t("user.toast.created")):(this.editHeaderText=this.t("user.edit"),this.toastText=this.t("user.toast.updated"))}});</script>
<dom-module id="yp-confirmation-dialog" assetpath="/">
  <template>

    <style include="iron-flex iron-flex-alignment">
      paper-dialog {
        background-color: #FFF;
      }
    </style>
    <iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals>

    <paper-dialog id="confirmationDialog">
      <div>[[confirmationText]]</div>
      <div class="buttons">
        <paper-button on-tap="_reset" dialog-dismiss="">[[t('cancel')]]</paper-button>
        <paper-button dialog-confirm="" on-tap="_confirm">[[t('confirm')]]</paper-button>
      </div>
    </paper-dialog>

  </template>

  <script>Polymer({is:"yp-confirmation-dialog",behaviors:[Polymer.appHelpers],properties:{confirmationText:{type:String},onConfirmedFunction:{type:Function,value:null}},_reset:function(){this.set("confirmationText",null),this.set("onConfirmedFunction",null)},open:function(n,i){this.set("confirmationText",n),this.set("onConfirmedFunction",i),this.$$("#confirmationDialog").open()},_confirm:function(){this.onConfirmedFunction&&(this.onConfirmedFunction(),this._reset())}});</script>
</dom-module>
</div></body></html>