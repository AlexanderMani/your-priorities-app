<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="yp-api-action-dialog" assetpath="../yp-api-action-dialog/"><template><style include="iron-flex iron-flex-alignment">:host{display:block;height:0;}paper-dialog{background-color:#FFF;}</style><iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals><yp-ajax method$="[[method]]" id="apiAjax" on-response="_response"></yp-ajax><paper-dialog id="confirmationDialog"><div>[[confirmationText]]</div><div class="buttons"><paper-button dialog-dismiss="">[[t('cancel')]]</paper-button><paper-button dialog-confirm="" on-tap="_delete">[[confirmButtonText]]</paper-button></div></paper-dialog></template><script>Polymer({is:'yp-api-action-dialog',behaviors:[Polymer.appHelpers],properties:{confirmationText:{type:String},action:{type:String},onFinishedFunction:{type:Function,value:null},confirmButtonText:{type:String}},setup:function(a,b,c,d,e){this.set('action',a),this.set('confirmationText',b),this.set('onFinishedFunction',c),d?this.set('confirmButtonText',d):this.set('confirmButtonText',this.t('delete')),e?this.set('method',e):this.set('method','DELETE')},open:function(){this.$$('#confirmationDialog').open()},_delete:function(){this.$$('#apiAjax').url=this.action,this.$$('#apiAjax').setBody({deleteConfirmed:!0}),this.$$('#apiAjax').generateRequest()},_response:function(){this.fire('api-action-finished'),this.onFinishedFunction&&this.onFinishedFunction()}});</script></dom-module><dom-module id="neon-animatable" assetpath="../../bower_components/neon-animation/"><template><style>:host{display:block;}</style><slot></slot></template></dom-module><script>Polymer({is:'neon-animatable',behaviors:[Polymer.NeonAnimatableBehavior,Polymer.IronResizableBehavior]});</script><script>Polymer({is:'cascaded-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){this._animations=[];var b=a.nodes,c=[],d=a.nodeDelay||50;a.timing=a.timing||{},a.timing.delay=a.timing.delay||0;for(var e,f,g=a.timing.delay,h=0;f=b[h];h++){a.timing.delay+=d,a.node=f;var i=document.createElement(a.animation);if(i.isNeonAnimation){var j=i.configure(a);this._animations.push(i),c.push(j)}else{console.warn(this.is+':',a.animation,'not found!'),e=!0;break}}if(a.timing.delay=g,a.node=null,!e)return this._effect=new GroupEffect(c),this._effect},complete:function(){for(var a,b=0;a=this._animations[b];b++)a.complete(a.config)}});</script><script>Polymer.NeonSharedElementAnimationBehaviorImpl={properties:{sharedElements:{type:Object}},findSharedElements:function(a){var b=a.fromPage,c=a.toPage;if(!b||!c)return console.warn(this.is+':',b?'toPage':'fromPage','is undefined!'),null;if(!b.sharedElements||!c.sharedElements)return console.warn(this.is+':','sharedElements are undefined for',b.sharedElements?c:b),null;var d=b.sharedElements[a.id],e=c.sharedElements[a.id];return d&&e?(this.sharedElements={from:d,to:e},this.sharedElements):(console.warn(this.is+':','sharedElement with id',a.id,'not found in',d?c:b),null)}},Polymer.NeonSharedElementAnimationBehavior=[Polymer.NeonAnimationBehavior,Polymer.NeonSharedElementAnimationBehaviorImpl];</script><script>Polymer({is:'hero-animation',behaviors:[Polymer.NeonSharedElementAnimationBehavior],configure:function(a){var b=this.findSharedElements(a);if(b){var c=b.from.getBoundingClientRect(),d=b.to.getBoundingClientRect(),e=c.left-d.left,f=c.top-d.top,g=c.width/d.width,h=c.height/d.height;return this._effect=new KeyframeEffect(b.to,[{transform:'translate('+e+'px,'+f+'px) scale('+g+','+h+')'},{transform:'none'}],this.timingFromConfig(a)),this.setPrefixedProperty(b.to,'transformOrigin','0 0'),b.to.style.zIndex=1e4,b.from.style.visibility='hidden',this._effect}},complete:function(a){var b=this.findSharedElements(a);return b?void(b.to.style.zIndex='',b.from.style.visibility=''):null}});</script><script>Polymer({is:'opaque-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:'1'},{opacity:'1'}],this.timingFromConfig(a)),b.style.opacity='0',this._effect},complete:function(a){a.node.style.opacity=''}});</script><script>Polymer({is:'ripple-animation',behaviors:[Polymer.NeonSharedElementAnimationBehavior],configure:function(a){var b=Math.abs,c=this.findSharedElements(a);if(!c)return null;var d,e,f=c.to.getBoundingClientRect();if(a.gesture)d=a.gesture.x-(f.left+f.width/2),e=a.gesture.y-(f.top+f.height/2);else{var g=c.from.getBoundingClientRect();d=g.left+g.width/2-(f.left+f.width/2),e=g.top+g.height/2-(f.top+f.height/2)}var h='translate('+d+'px,'+e+'px)',i=Math.max(f.width+2*b(d),f.height+2*b(e)),j=Math.sqrt(2*i*i),k=j/f.width,l=j/f.height;return this._effect=new KeyframeEffect(c.to,[{transform:h+' scale(0)'},{transform:h+' '+('scale('+k+','+l+')')}],this.timingFromConfig(a)),this.setPrefixedProperty(c.to,'transformOrigin','50% 50%'),c.to.style.borderRadius='50%',this._effect},complete:function(){this.sharedElements&&(this.setPrefixedProperty(this.sharedElements.to,'transformOrigin',''),this.sharedElements.to.style.borderRadius='')}});</script><script>Polymer({is:'reverse-ripple-animation',behaviors:[Polymer.NeonSharedElementAnimationBehavior],configure:function(a){var b=Math.abs,c=this.findSharedElements(a);if(!c)return null;var d,e,f=c.from.getBoundingClientRect();if(a.gesture)d=a.gesture.x-(f.left+f.width/2),e=a.gesture.y-(f.top+f.height/2);else{var g=c.to.getBoundingClientRect();d=g.left+g.width/2-(f.left+f.width/2),e=g.top+g.height/2-(f.top+f.height/2)}var h='translate('+d+'px,'+e+'px)',i=Math.max(f.width+2*b(d),f.height+2*b(e)),j=Math.sqrt(2*i*i),k=j/f.width,l=j/f.height;return this._effect=new KeyframeEffect(c.from,[{transform:h+' '+('scale('+k+','+l+')')},{transform:h+' scale(0)'}],this.timingFromConfig(a)),this.setPrefixedProperty(c.from,'transformOrigin','50% 50%'),c.from.style.borderRadius='50%',this._effect},complete:function(){this.sharedElements&&(this.setPrefixedProperty(this.sharedElements.from,'transformOrigin',''),this.sharedElements.from.style.borderRadius='')}});</script><script>Polymer({is:'scale-down-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c='scale(0, 0)';return'x'===a.axis?c='scale(0, 1)':'y'===a.axis&&(c='scale(1, 0)'),this._effect=new KeyframeEffect(b,[{transform:'scale(1,1)'},{transform:c}],this.timingFromConfig(a)),a.transformOrigin&&this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin),this._effect}});</script><script>Polymer({is:'scale-up-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c='scale(0)';return'x'===a.axis?c='scale(0, 1)':'y'===a.axis&&(c='scale(1, 0)'),this._effect=new KeyframeEffect(b,[{transform:c},{transform:'scale(1, 1)'}],this.timingFromConfig(a)),a.transformOrigin&&this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin),this._effect}});</script><script>Polymer({is:'slide-from-left-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translateX(-100%)'},{transform:'none'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','0 50%'),this._effect}});</script><script>Polymer({is:'slide-from-right-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translateX(100%)'},{transform:'none'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','0 50%'),this._effect}});</script><script>Polymer({is:'slide-from-top-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translateY(-100%)'},{transform:'translateY(0%)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','50% 0'),this._effect}});</script><script>Polymer({is:'slide-from-bottom-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translateY(100%)'},{transform:'translateY(0)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','50% 0'),this._effect}});</script><script>Polymer({is:'slide-left-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'none'},{transform:'translateX(-100%)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','0 50%'),this._effect}});</script><script>Polymer({is:'slide-right-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'none'},{transform:'translateX(100%)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','0 50%'),this._effect}});</script><script>Polymer({is:'slide-up-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translate(0)'},{transform:'translateY(-100%)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','50% 0'),this._effect}});</script><script>Polymer({is:'slide-down-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{transform:'translateY(0%)'},{transform:'translateY(100%)'}],this.timingFromConfig(a)),a.transformOrigin?this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin):this.setPrefixedProperty(b,'transformOrigin','50% 0'),this._effect}});</script><script>Polymer({is:'transform-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=a.transformFrom||'none',d=a.transformTo||'none';return this._effect=new KeyframeEffect(b,[{transform:c},{transform:d}],this.timingFromConfig(a)),a.transformOrigin&&this.setPrefixedProperty(b,'transformOrigin',a.transformOrigin),this._effect}});</script><script>Polymer.NeonSharedElementAnimatableBehaviorImpl={properties:{sharedElements:{type:Object,value:{}}}},Polymer.NeonSharedElementAnimatableBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonSharedElementAnimatableBehaviorImpl];</script><dom-module id="ac-notification-selection" assetpath="../ac-notifications/"><template><style include="iron-flex iron-flex-alignment">.half{width:50%;}.notificationName{padding-top:16px;font-size:16px;font-weight:bold;margin-bottom:8px;padding-bottom:4px;color:#333;border-bottom:solid 1px #ddd;}.notificationSub{color:#888;}paper-radio-button{padding-top:8px;padding-bottom:8px;}</style><iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals><div class="layout vertical"><div class="notificationName">[[name]]</div><div class="layout horizontal wrap"><div class="layout vertical half"><div class="notificationSub">[[t('notification.method')]]</div><div class="layout horizontal"><paper-radio-group id="notificationMethodGroup" name="method" class="method" attr-for-selected="enum-value" selected="{{method}}"><template is="dom-repeat" items="[[availableMethods]]"><paper-radio-button enum-value$="[[item.enumValue]]">[[item.name]]</paper-radio-button></template></paper-radio-group></div></div><div class="layout vertical half"><div class="notificationSub">[[t('notification.frequency')]]</div><div class="layout horizontal"><paper-radio-group id="notificationFrequencyGroup" name="frequency" attr-for-selected="enum-value" class="frequency" selected="{{frequency}}"><template is="dom-repeat" items="[[availableFrequencies]]"><paper-radio-button enum-value$="[[item.enumValue]]">[[item.name]]</paper-radio-button></template></paper-radio-group></div></div></div></div></template><script>Polymer({is:'ac-notification-selection',behaviors:[Polymer.appHelpers],properties:{name:String,setting:{type:Object,notify:!0,observer:'_settingChanged'},frequency:{type:Number,notify:!0,observer:'_frequencyChanged'},method:{type:Number,notify:!0,observer:'_methodChanged'},availableFrequencies:{type:Array,computed:'_getAvailableFrequencies(language, method)'},availableMethods:{type:Object,computed:'_availableMethods(language)'}},_availableMethods:function(a){return a?[{name:this.t('notification.muted'),enumValue:0},{name:this.t('notification.browser'),enumValue:1},{name:this.t('notification.email'),enumValue:2}]:[]},_methodChanged:function(a){a=parseInt(a),this.setting.method!=a&&this.set('setting.method',a)},_frequencyChanged:function(a){a=parseInt(a),this.setting.frequency!=a&&this.set('setting.frequency',a)},_settingChanged:function(a){a&&(this.set('method',a.method),this.set('frequency',a.frequency))},_getAvailableFrequencies:function(a,b){var c=[];return a&&(!b||0==b||(1==b?(this.set('frequency',0),c=[{name:this.t('notification.asItHappens'),enumValue:0}]):2==b&&(c=[{name:this.t('notification.asItHappens'),enumValue:0},{name:this.t('notification.hourly'),enumValue:1},{name:this.t('notification.daily'),enumValue:2},{name:this.t('notification.weekly'),enumValue:3},{name:this.t('notification.monthly'),enumValue:5}]))),c}});</script></dom-module><dom-module id="ac-notification-settings" assetpath="../ac-notifications/"><template><style include="iron-flex iron-flex-alignment"></style><iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals><ac-notification-selection name="[[t('notification.myPosts')]]" setting="{{notificationsSettings.my_posts}}"></ac-notification-selection><ac-notification-selection name="[[t('notification.myPostsEndorsements')]]" setting="{{notificationsSettings.my_posts_endorsements}}"></ac-notification-selection><ac-notification-selection name="[[t('notification.myPoints')]]" setting="{{notificationsSettings.my_points}}"></ac-notification-selection><ac-notification-selection name="[[t('notification.myPointEndorsements')]]" setting="{{notificationsSettings.my_points_endorsements}}"></ac-notification-selection><ac-notification-selection name="[[t('notification.allCommunity')]]" setting="{{notificationsSettings.all_community}}"></ac-notification-selection><ac-notification-selection name="[[t('notification.allGroup')]]" setting="{{notificationsSettings.all_group}}"></ac-notification-selection></template><script>Polymer({is:'ac-notification-settings',behaviors:[Polymer.appHelpers],properties:{notificationsSettings:{type:Object,notify:!0,observer:'_notificationsSettingsChanged'}},observers:['settingsStarChanged(notificationsSettings.*)'],_notificationsSettingsChanged:function(){},settingsStarChanged:function(){this.fire('yp-notifications-changed',this.notificationsSettings)}});</script></dom-module><dom-module id="yp-user-edit" assetpath="../yp-user/"><template><style include="iron-flex iron-flex-alignment">.container{margin-top:16px;height:100%;}.additionalSettings{margin-top:16px;}.icon{padding-right:8px;}#deleteUser{margin-top:16px;}</style><iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals><yp-edit-dialog id="editDialog" double-width="" icon="face" action="[[action]]" method="[[method]]" params="[[params]]" save-text="[[saveText]]" toast-text="[[toastText]]"><h2 slot="h2">[[editHeaderText]]</h2><div class="container"><paper-tabs selected="{{selected}}" id="paper_tabs" focused=""><paper-tab><span>[[t('user.info')]]</span></paper-tab><paper-tab>[[t('user.notifications')]]</paper-tab></paper-tabs><div class="layout vertical wrap container"><neon-animated-pages id="pages" class="layout horizontal flex" selected="[[selected]]"><section><paper-input id="name" name="name" type="text" label="[[t('Name')]]" value="{{user.name}}" maxlength="50" char-counter=""></paper-input><paper-input id="email" name="email" type="text" label="[[t('Email')]]" value="{{user.email}}"></paper-input><div class="layout vertical additionalSettings"><yp-file-upload id="profileImageUpload" raised="true" multi="false" target="/api/images?itemType=user-profile" method="POST" on-success="_profileImageUploaded"><iron-icon class="icon" icon="photo-camera"></iron-icon><span>[[t('image.profile.upload')]]</span></yp-file-upload></div><div class="layout vertical additionalSettings" hidden=""><yp-file-upload id="headerImageUpload" raised="true" multi="false" target="/api/images?itemType=user-header" method="POST" on-success="_headerImageUploaded"><iron-icon class="icon" icon="photo-camera"></iron-icon><span>[[t('image.header.upload')]]</span></yp-file-upload></div><yp-language-selector name="defaultLocale" selected-locale="{{user.default_locale}}"></yp-language-selector><paper-button id="deleteUser" raised="" on-tap="_deleteUser">[[t('deleteUser')]]</paper-button><yp-ajax id="deleteUserAjax" on-response="_deleteCompleted" method="DELETE" url="/api/users/delete_current_user"></yp-ajax><input type="hidden" name="uploadedProfileImageId" value="[[uploadedProfileImageId]]"> <input type="hidden" name="uploadedHeaderImageId" value="[[uploadedHeaderImageId]]"></section><section><ac-notification-settings notifications-settings="{{notificationSettings}}"></ac-notification-settings><input type="hidden" name="notifications_settings" value="[[encodedUserNotificationSettings]]"></section></neon-animated-pages></div></div></yp-edit-dialog></template></dom-module><script>Polymer({is:'yp-user-edit',behaviors:[Polymer.appHelpers,Polymer.ypEditDialogBehavior],properties:{action:{type:String,value:'/api/users'},user:{type:Object,observer:'_userChanged'},params:{type:String},method:{type:String},selected:{type:Number,value:0},encodedUserNotificationSettings:{type:String,observer:'_encodedUserNotificationSettingsChanged'},uploadedProfileImageId:{type:String},uploadedHeaderImageId:{type:String},notificationSettings:{type:Object,notify:!0,observer:'_notificationSettingsChanged'}},listeners:{"yp-notifications-changed":'_setNotificationSettings'},_deleteUser:function(){var a=Polymer.dom(document).querySelector('yp-app').getDialog('confirmationDialog');a.open(this.t('areYouSureYouWantToDeleteUser'),this._deleteUserFinalWarning.bind(this))},_deleteUserFinalWarning:function(){this.async(function(){var a=Polymer.dom(document).querySelector('yp-app').getDialog('confirmationDialog');a.open(this.t('areYouReallySureYouWantToDeleteUser'),this._deleteUserForReals.bind(this))})},_deleteUserForReals:function(){this.$.deleteUserAjax.body={},this.$.deleteUserAjax.generateRequest()},_deleteCompleted:function(){this._clear(),this.$$('#editDialog').close(),this.async(function(){window.location.reload()},100)},_setNotificationSettings:function(a,b){this.set('notificationSettings',b),this.set('encodedUserNotificationSettings',this._encodeNotificationsSettings(this.notificationSettings))},_notificationSettingsChanged:function(){this.set('encodedUserNotificationSettings',this._encodeNotificationsSettings(this.notificationSettings))},_encodedUserNotificationSettingsChanged:function(){},_encodeNotificationsSettings:function(a){return JSON.stringify(a)},_userChanged:function(a){this.set('notificationSettings',a.notifications_settings)},_profileImageUploaded:function(a,b){var c=JSON.parse(b.xhr.response);this.set('uploadedProfileImageId',c.id)},_headerImageUploaded:function(a,b){var c=JSON.parse(b.xhr.response);this.set('uploadedHeaderImageId',c.id)},_customRedirect:function(){window.appUser.checkLogin()},_clear:function(){this.set('user',{name:'',email:'',access:2}),this.uploadedProfileImageId=null,this.uploadedHeaderImageId=null,this.$.headerImageUpload.clear(),this.$.profileImageUpload.clear()},setup:function(a,b,c,d){this.set('user',a),this.set('new',b),this.set('refreshFunction',c),d&&this.set('selected',1),this._setupTranslation()},_setupTranslation:function(){this.new?(this.editHeaderText=this.t('user.new'),this.toastText=this.t('userToastCreated'),this.set('saveText',this.t('create'))):(this.set('saveText',this.t('save')),this.editHeaderText=this.t('user.edit'),this.toastText=this.t('userToastUpdated'))}});</script><dom-module id="yp-confirmation-dialog"><template><style include="iron-flex iron-flex-alignment">paper-dialog{background-color:#FFF;}</style><iron-signals on-iron-signal-yp-language="_languageEvent"></iron-signals><paper-dialog id="confirmationDialog"><div>[[confirmationText]]</div><div class="buttons"><paper-button on-tap="_reset" dialog-dismiss="">[[t('cancel')]]</paper-button><paper-button dialog-confirm="" on-tap="_confirm">[[t('confirm')]]</paper-button></div></paper-dialog></template><script>Polymer({is:'yp-confirmation-dialog',behaviors:[Polymer.appHelpers],properties:{confirmationText:{type:String},onConfirmedFunction:{type:Function,value:null}},_reset:function(){this.set('confirmationText',null),this.set('onConfirmedFunction',null)},open:function(a,b){this.set('confirmationText',a),this.set('onConfirmedFunction',b),this.$$('#confirmationDialog').open()},_confirm:function(){this.onConfirmedFunction&&(this.onConfirmedFunction(),this._reset())}});</script></dom-module><dom-module id="ac-notification-toast" assetpath="../ac-notifications/"><template><style include="iron-flex iron-flex-alignment">.text{margin:16px;}</style><paper-toast id="toast" duration="5000"><div class="layout vertical"><yp-user-with-organization class="layout horizontal self-end" user="[[user]]" hidden$="[[!user]]"></yp-user-with-organization><div class="text">[[notificationText]]</div></div></paper-toast></template><script>Polymer({is:'ac-notification-toast',properties:{user:{type:Object,value:null},notificationText:{type:String,value:null}},open:function(a,b){this.set('user',a),this.set('notificationText',b),this.$.toast.close(),this.async(function(){this.$.toast.open()})}});</script></dom-module></div></body></html>