<!DOCTYPE html><html><head><meta charset="UTF-8"><title>yp-app-globals tests</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../../bower_components/webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script><script src="../../../bower_components/web-component-tester/browser.js"></script><script src="../../../bower_components/test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../../../bower_components/test-fixture/test-fixture.html"><script type="text/javascript" src="../../i18next-1.7.4.min.js"></script><link rel="import" href="../yp-app-globals.html"><style include="iron-flex iron-flex-alignment">body{margin:0;padding:0;}</style></head><body><test-fixture id="basic"><template><yp-app-globals></yp-app-globals></template></test-fixture><test-fixture id="resetSeenWelcome"><template><yp-app-globals reset-seen-welcome=""></yp-app-globals></template></test-fixture><script>suite('basic',function(){var a,b={json:{"Content-Type":'application/json'}};setup(function(){a=sinon.fakeServer.create(),a.respondWith('GET',/\/activity-stream\/activity\/?timestamp=*/,[200,b,'{"status":"ok"}']),a.autoRespond=!0,i18n.init({lng:'en'}),window.i18n=i18n}),teardown(function(){a.restore()}),test('can access through window.global',function(){var a=fixture('basic'),b=window.appGlobals;expect(b.localName).to.be.ok,expect(b.localName).to.be.equal('yp-app-globals')}),test('automatically open welcome dialog when new',function(a){var b=fixture('resetSeenWelcome');this.async(function(){var c=b.querySelector('#welcomeDialog');expect(c.opened).to.be.equal(!0);var d=b.querySelector('#seenWelcomeButton');d.click(),this.async(function(){expect(c.opened).to.be.equal(!1),a()})})}),test('welcome dialog closed on second use',function(a){var b=fixture('basic');this.async(function(){var c=b.querySelector('#welcomeDialog');expect(c.opened).to.be.equal(!1),a()})}),test('can send activity',function(b){var c=fixture('basic'),d=window.appGlobals;d.activity('actor','verb','object','context'),this.async(function(){var c=a.requests[2];expect(c.requestBody).to.include('actor'),expect(c.requestBody).to.include('verb'),expect(c.requestBody).to.include('object'),expect(c.requestBody).to.include('context'),b()})}),test('can open default dialogue and close it',function(a){var b=fixture('basic'),c=b.querySelector('#dialog');b.openDialog('this.is.test'),this.async(function(){expect(c.opened).to.be.equal(!0),expect(c.innerHTML).to.include('this.is.test');var d=b.querySelector('#defaultOkButton');d.click(),this.async(function(){expect(c.opened).to.be.equal(!1),a()})})})});</script></body></html>