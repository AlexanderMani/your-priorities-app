!function(a,b){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.i18nextXHRBackend=b()}(this,function(){"use strict";function b(b){return a.call(i.call(arguments,1),function(a){if(a)for(var c in a)void 0===b[c]&&(b[c]=a[c])}),b}function d(a,b){if(b&&"object"===(void 0===b?"undefined":j(b))){var c="",d=encodeURIComponent;for(var f in b)c+="&"+d(f)+"="+d(b[f]);if(!c)return a;a=a+(-1===a.indexOf("?")?"?":"&")+c.slice(1)}return a}function e(b,c,e,f,g){f&&"object"===(void 0===f?"undefined":j(f))&&(g||(f._t=new Date),f=d("",f).slice(1)),c.queryStringParams&&(b=d(b,c.queryStringParams));try{var a;a=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),a.open(f?"POST":"GET",b,1),c.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!c.withCredentials,f&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var h=c.customHeaders;if(h)for(var i in h)a.setRequestHeader(i,h[i]);a.onreadystatechange=function(){3<a.readyState&&e&&e(a.responseText,a)},a.send(f)}catch(a){console&&console.log(a)}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:e}}var h=[],a=h.forEach,i=h.slice,j="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":babelHelpers.typeof(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":babelHelpers.typeof(a)},k=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,a),this.init(b,c),this.type="backend"}return k(a,[{key:"init",value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=a,this.options=b(c,this.options||{},g())}},{key:"readMulti",value:function(a,b,c){var d=this.options.loadPath;"function"==typeof this.options.loadPath&&(d=this.options.loadPath(a,b));var e=this.services.interpolator.interpolate(d,{lng:a.join("+"),ns:b.join("+")});this.loadUrl(e,c)}},{key:"read",value:function(a,b,c){var d=this.options.loadPath;"function"==typeof this.options.loadPath&&(d=this.options.loadPath([a],[b]));var f=this.services.interpolator.interpolate(d,{lng:a,ns:b});this.loadUrl(f,c)}},{key:"loadUrl",value:function(b,c){var d=this;this.options.ajax(b,this.options,function(e,f){if(500<=f.status&&600>f.status)return c("failed loading "+b,!0);if(400<=f.status&&500>f.status)return c("failed loading "+b,!1);var g,a;try{g=d.options.parse(e,b)}catch(c){a="failed parsing "+b+" to json"}return a?c(a,!1):void c(null,g)})}},{key:"create",value:function(b,c,d,f){var g=this;"string"==typeof b&&(b=[b]);var h={};h[d]=f||"",b.forEach(function(a){var b=g.services.interpolator.interpolate(g.options.addPath,{lng:a,ns:c});g.options.ajax(b,g.options,function(){},h)})}}]),a}();return l.type="backend",l});