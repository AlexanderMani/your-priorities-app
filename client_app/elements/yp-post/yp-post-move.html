<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">

<link rel="import" href="../../bower_components/file-upload/file-upload.html">

<link rel="import" href="../yp-behaviors/app-helpers.html">

<link rel="import" href="../yp-edit-dialog/yp-edit-dialog.html">
<link rel="import" href="../yp-edit-dialog/yp-edit-dialog-behavior.html">

<dom-module id="yp-post-move">
  <template>

    <style>
      .additionalSettings {
        padding-top: 16px;
      }

      paper-textarea {
        padding-top: 16px;
      }
    </style>

    <yp-edit-dialog id="editDialog" double-width icon="language" confirmation-text="[[t('post.statusChangeConfirmText')]]" action="[[action]]" method="[[method]]" params="[[params]]" save-text="[[saveText]]" toast-text="[[toastText]]">
      <h2>[[editHeaderText]]</h2>

      <div class="layout horizontal center-center">
        <paper-dropdown-menu label="[[t('post.statusChangeSelectNewStatus')]]">
          <paper-menu class="dropdown-content" attr-for-selected="name" selected="{{officialStatus}}">
            <template is="dom-repeat" items="[[collectionStatusOptions()]]" as="statusOption">
              <paper-item name="[[statusOption.official_value]]">[[statusOption.translatedName]]</paper-item>
            </template>
          </paper-menu>
        </paper-dropdown-menu>
        <input type="hidden" name="official_status" value="[[officialStatus]]">
      </div>

      <div class="layout horizontal center-center">
        <yp-ajax method="GET" id="getAjax" on-response="_getGroupsResponse"></yp-ajax>
      </div>
    </yp-edit-dialog>
  </template>

</dom-module>

<script>

  Polymer({

    is: 'yp-post-move',

    behaviors: [
      Polymer.appHelpers,
      Polymer.ypEditDialogBehavior
    ],

    properties: {

      action: {
        type: String,
        value: "/api/posts"
      },

      post: {
        type: Object
      },

      params: {
        type: String
      },

      method: {
        type: String
      },

      officialStatus: Number,
      selectedGroupId: Number
    },

    _clear: function () {
      this.set('selectedGroup', null);
      this.set('post', null);
    },

    setupAndOpen: function (post, refreshFunction) {
      this.set('post', post);
      this.set('refreshFunction', refreshFunction);
      this._setupTranslation();
      this.open();
    },

    _setupTranslation: function () {
      this.set('editHeaderText', this.t('post.move'));
      this.set('toastText', this.t('post.haveMovedPost'));
      this.set('saveText', this.t('post.move'));
    }
  });
</script>
