<polymer-element name="idea-page" extends="base-page" attributes="contactId contacts" layout vertical>
  <template>
    <link rel="stylesheet" href="idea-page.css">
    <!--
    On larger screens, change the behavior of the header panel so it doesn't
    scroll away or do the condenses feature. Instead, treat its content like
    a regular toolbar.
    -->
    <core-media-query query="min-width: 640px" queryMatches="{{largeScreen}}">
    </core-media-query>
    <core-scroll-header-panel condenses keepCondensedHeader>

      <core-toolbar class="tall">

        <core-icon-button icon="arrow-back"></core-icon-button>
        <div flex></div>
        <core-icon-button icon="search"></core-icon-button>
        <core-icon-button icon="more-vert"></core-icon-button>
        <div class="bottom indent title">{{idea.title}}</div>

      </core-toolbar>

      <div class="content">

      </div>

    </core-scroll-header-panel>
  </template>
  <script>
    (function() {
      Polymer({
        domReady: function() {
          var titleStyle = this.shadowRoot.querySelector('.title').style;
          addEventListener('core-header-transform', function(e) {
            var d = e.detail;
            var m = d.height - d.condensedHeight;
            var scale = Math.max(0.75, (m - d.y) / (m / 0.25)  + 0.75);
            titleStyle.transform = titleStyle.webkitTransform =
              'scale(' + scale + ') translateZ(0)';
          });
        },
        willPrepare: function() {
          this.super();

          // Measure the core-scroll-header-panel, otherwise its height will
          // be messed up
          this.$.scrollHeaderPanel.measureHeaderHeight();

          // Reset the scroller so every time the user comes to the info page
          // so they see the full profile photo
          this.$.scrollHeaderPanel.scroller.scrollTop = 0;
        }
      });
    })();
  </script>
</polymer-element>
