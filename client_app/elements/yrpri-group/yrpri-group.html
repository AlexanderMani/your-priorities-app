<polymer-element name="yrpri-group" attributes="small group showShortName">
  <template>
    <link rel="stylesheet" href="yrpri-group.css">
    <app-globals id="globals"></app-globals>

    <div layout horizontal?="{{!small}}" flex>
      <div layout style="vertical-align: top;width:100%;">
        <div layout vertical around-justified flex>
          <div>
            <template if="{{group.top_banner_file_name}}">
              <image width="568"
                     class="groupImage"
                     on-tap="{{goToGroup}}"
                     src="https://s3.amazonaws.com/{{'' | s3bucketName}}/sub_instances/top_banners/000/000/{{group.id | padNumber}}/icon_full/{{group.top_banner_file_name}}"/>
            </template>
            <template if="{{!group.top_banner_file_name}}">
              <image width="568"
                     class="groupImage"
                     on-tap="{{goToGroup}}"
                     src="{{'' | defaultGroupImage}}"/>
            </template>
          </div>
          <div flex class="header" on-tap="{{goToGroup}}" layout vertical>
            <div>
              <template if="{{group.name}}">
                <b>{{group.name | trim | truncate(small ? 60 : 200) }}</b>
              </template>
              <template if="showShortName">
                <br>{{group.short_name}}
              </template>
            </div>
            <template if="{{!small}}">
              <div flex style="">
                <idea-action-bar idea="{{idea}}" small="{{small}}" flex
                                 style="float:right; clear:right;"></idea-action-bar>
              </div>
              <core-icon-button icon="report" style="color:#eee;"></core-icon-button>
              <paper-icon-button class="share" style="color:#b0b0b0;" icon="image:remove-red-eye"></paper-icon-button>
              <paper-icon-button class="share" icon="social:share"></paper-icon-button>
              <template if="{{false}}">
                <paper-menu-button class="selected-items" layout horizontal>
                  <paper-icon-button icon="more-vert"></paper-icon-button>
                  <paper-dropdown class="dropdown" halign="right">
                    <div class="separator">Admin</div>
                    <paper-item>Breyta</paper-item>
                    <paper-item>Staða</paper-item>
                    <paper-item>Eyða</paper-item>
                  </paper-dropdown>
                </paper-menu-button>
              </template>
            </template>
          </div>

          <div layout class="description">
            <template if="{{group.description}}">
              {{group.description | trim | truncate(small ? 200 : 10000,"...")}}
            </template>
            <template if="{{group.IsoCountry}}">
              <core-image src="{{'' | isoCountryImagePath}}{{group.IsoCountry.code | lowercase}}.png"></core-image>
            </template>
          </div>
          <group-action-bar group="{{group}}"></group-action-bar>
        </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      goToGroup: function (e) {
        this.$.globals.groupId = this.group.id;
        window.location = '/#/groups/' + this.group.id + "/ideas/" + this.group.name;
      }
    });
  </script>
</polymer-element>
